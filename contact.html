<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact Us | Akeva Technologies</title>
    <!-- Added meta description -->
    <meta name="description" content="Contact Akeva Technologies for expert cybersecurity and AI governance consulting. Reach our team by phone, email, or visit our Ottawa office to discuss your security and compliance needs.">
    <!-- Added canonical tag -->
    <link rel="canonical" href="https://www.akeva-technologies.com/contact.html">
    <!-- Added Open Graph tags for social media sharing -->
    <meta property="og:title" content="Contact Us | Akeva Technologies">
    <meta property="og:description" content="Contact Akeva Technologies for expert cybersecurity and AI governance consulting. Reach our team to discuss your security and compliance needs.">
    <meta property="og:image" content="https://www.akeva-technologies.com/img/AkevaTechnologiesLogo.png">
    <meta property="og:url" content="https://www.akeva-technologies.com/contact.html">
    <meta property="og:type" content="website">
    <!-- Added keywords meta tag -->
    <meta name="keywords" content="contact Akeva Technologies, cybersecurity consulting, AI governance experts, Ottawa security consultants, ISO 27001 consultants, ISO 42001 consultants, information security services">
    <!-- Added author meta tag -->
    <meta name="author" content="Akeva Technologies">
    <!-- Added color scheme meta tag -->
    <meta name="theme-color" content="#0056b3">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="contact.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" href="img/Favicon.png">
    
    <!-- Schema.org JSON-LD structured data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "ContactPage",
      "url": "https://www.akeva-technologies.com/contact.html",
      "name": "Contact Us | Akeva Technologies",
      "description": "Get in touch with Akeva Technologies for cybersecurity and AI governance consulting services.",
      "isPartOf": {
        "@type": "WebSite",
        "url": "https://www.akeva-technologies.com",
        "name": "Akeva Technologies"
      },
      "mainEntity": {
        "@type": "Organization",
        "name": "Akeva Technologies",
        "url": "https://www.akeva-technologies.com",
        "logo": "https://www.akeva-technologies.com/img/AkevaTechnologiesLogo.png",
        "contactPoint": {
          "@type": "ContactPoint",
          "telephone": "+14164195683",
          "contactType": "customer service",
          "email": "contact@akeva-technologies.com",
          "availableLanguage": ["English", "French"],
          "contactOption": "TollFree"
        }
      }
    }
    </script>
    
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "LocalBusiness",
      "name": "Akeva Technologies",
      "image": "https://www.akeva-technologies.com/img/AkevaTechnologiesLogo.png",
      "url": "https://www.akeva-technologies.com",
      "telephone": "+14164195683",
      "email": "contact@akeva-technologies.com",
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "435 St. Laurent Blvd Suite 202",
        "addressLocality": "Ottawa",
        "addressRegion": "ON",
        "postalCode": "K1K2Z8",
        "addressCountry": "CA"
      },
      "geo": {
        "@type": "GeoCoordinates",
        "latitude": 45.433766,
        "longitude": -75.656505
      },
      "openingHoursSpecification": [
        {
          "@type": "OpeningHoursSpecification",
          "dayOfWeek": ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"],
          "opens": "09:00",
          "closes": "17:00"
        }
      ],
      "sameAs": [
        "https://www.linkedin.com/company/akeva-technologies"
      ]
    }
    </script>
    
    <!-- Added BreadcrumbList structured data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "name": "Home",
          "item": "https://www.akeva-technologies.com/"
        },
        {
          "@type": "ListItem",
          "position": 2,
          "name": "Contact",
          "item": "https://www.akeva-technologies.com/contact.html"
        }
      ]
    }
</script>
    
    <!-- Removed config.js reference -->
    <style>
.math-challenge-container {
    display: flex;
    align-items: center;
    gap: 10px;
}

#math-challenge {
    font-weight: bold;
    font-size: 1.1em;
}

.number-control {
    display: flex;
    align-items: center;
    border: 1px solid #ccc;
    border-radius: 4px;
    overflow: hidden;
}

.number-display {
    width: 40px;
    text-align: center;
    font-size: 1.1em;
    padding: 8px 0;
    border: none;
    background: #fff;
}

.number-btn {
    background: #f0f0f0;
    border: none;
    width: 30px;
    height: 36px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background-color 0.2s;
}

.number-btn:hover {
    background: #e0e0e0;
}

.number-btn:active {
    background: #d0d0d0;
}

.number-btn:focus {
    outline: 2px solid #0056b3;
}
</style>
</head>
<body>
    <div id="app">
        <a href="#main-content" class="skip-link sr-only sr-only-focusable">Skip to main content</a>
        
        <header role="banner">
            <div class="container">
                <a href="index.html" class="logo" aria-label="AKEVA TECHNOLOGIES homepage">
                    <img src="img/AkevaTechnologiesLogo.png" alt="Akeva Technologies Logo - Cybersecurity and AI Governance Consulting" width="75" height="75">
                </a>
                <!-- Mobile menu toggle button -->
                <button class="mobile-menu-toggle" aria-label="Toggle navigation menu" aria-expanded="false" aria-controls="primary-navigation" onclick="toggleMobileMenu()">
                    <i class="fas fa-bars" id="menu-icon" aria-hidden="true"></i>
                </button>
                <nav class="" aria-label="Primary navigation" id="primary-navigation">
                    <ul role="menubar">
                        <li role="none"><a href="index.html" role="menuitem">Home</a></li>
                        <li role="none"><a href="about.html" role="menuitem">About</a></li>
                        <li role="none"><a href="services.html" role="menuitem">Services</a></li>
                        <li role="none"><a href="contact.html" class="active" role="menuitem" aria-current="page">Contact</a></li>
                    </ul>
                </nav>
            </div>
        </header>

        <main id="main-content">            
            <section class="page-header" aria-labelledby="page-title">
                <div class="container">
                    <h1 id="page-title">Contact Us</h1>
                </div>
            </section>

            <section class="contact-section" aria-labelledby="contact-heading">
                <div class="container contact-container">
                    <div class="contact-info">
                        <h2 id="contact-heading"><span class="highlight">Connect</span> With Us</h2>
                        <p>We're here to answer any questions you may have about our cybersecurity and AI governance services. Reach out to us and we'll respond as soon as we can.</p>
                        
                        <div class="contact-details">
                            <div class="contact-info-item">
                                <div class="contact-icon" aria-hidden="true"><i class="fas fa-envelope"></i></div>
                                <div class="contact-text">
                                    <h3 id="email-heading">Email</h3>
                                    <p><a href="mailto:contact@akeva-technologies.com" aria-labelledby="email-heading">contact@akeva-technologies.com</a></p>
                                </div>
                            </div>
                            <div class="contact-info-item">
                                <div class="contact-icon" aria-hidden="true"><i class="fas fa-phone"></i></div>
                                <div class="contact-text">
                                    <h3 id="phone-heading">Phone</h3>
                                    <p><a href="tel:+14164195683" aria-labelledby="phone-heading">+1 (416) 419-5683</a></p>
                                </div>
                            </div>
                            <div class="contact-info-item">
                                <div class="contact-icon" aria-hidden="true"><i class="fas fa-map-marker-alt"></i></div>
                                <div class="contact-text">
                                    <h3 id="address-heading">Address</h3>
                                    <address aria-labelledby="address-heading">
                                        435 St. Laurent Blvd Suite 202,<br> OTTAWA, ON K1K2Z8
                                    </address>
                                </div>
                            </div>
                        </div>
                        
                        <div class="social-icons" aria-label="Social media links">
                            <a href="#" class="social-icon" aria-label="LinkedIn - Connect with Akeva Technologies"><i class="fab fa-linkedin" aria-hidden="true"></i></a>    
                            <!-- To add LinkedIn URL, replace the # with the URL of your LinkedIn page-->
                            <!-- Example: -->
                            <!-- a href="https://www.linkedin.com/in/misse-misse/" -->
                        </div>
                        <div class="contact-decoration" aria-hidden="true"></div>
                    </div>
                    
                    <div class="contact-form">
                        <h2 id="form-heading">Send Us a <span class="highlight">Message</span></h2>
                        
                        <!-- Updated form action to point to our PHP processor -->
                        <form action="process-form.php" method="POST" id="contact-form" aria-labelledby="form-heading">
                            
                            <!-- Removed access key input - it's now in the PHP file -->
                            
                            <!-- Optional: Subject field for email -->
                            <input type="hidden" name="subject" value="New Contact Form Submission - Akeva Technologies">
                            
                            <!-- Optional: From Name field for email -->
                            <input type="hidden" name="from_name" value="Akeva Technologies Website">
                            
                            <!-- Removed redirect URL - handled in PHP -->
                            
                            <div class="form-grid">
                                <div class="input-group">
                                    <label for="name" id="name-label">Full Name</label>
                                    <input 
                                        type="text" 
                                        id="name" 
                                        name="name" 
                                        class="form-input"
                                        aria-required="true"
                                        required
                                    >
                                    <div class="error-message" id="name-error" role="alert"></div>
                                </div>
                                
                                <div class="input-group">
                                    <label for="email" id="email-label">Email Address</label>
                                    <input 
                                        type="email" 
                                        id="email" 
                                        name="email" 
                                        class="form-input"
                                        aria-required="true"
                                        required
                                    >
                                    <div class="error-message" id="email-error" role="alert"></div>
                                </div>
                                
                                <div class="input-group">
                                    <label for="phone" id="phone-label">Phone Number (Optional)</label>
                                    <input 
                                        type="tel" 
                                        id="phone" 
                                        name="phone"
                                        class="form-input"
                                        aria-required="false"
                                    >
                                </div>
                                
                                <div class="input-group">
                                    <label for="company" id="company-label">Company Name (Optional)</label>
                                    <input 
                                        type="text" 
                                        id="company" 
                                        name="company"
                                        class="form-input"
                                        aria-required="false"
                                    >
                                </div>
                            </div>
                            
                            <div class="input-group full-width">
                                <label for="subject" id="subject-label">Subject</label>
                                <input 
                                    type="text" 
                                    id="subject" 
                                    name="subject" 
                                    class="form-input"
                                    aria-required="true"
                                    required
                                >
                                <div class="error-message" id="subject-error" role="alert"></div>
                            </div>
                            
                            <div class="input-group full-width">
                                <label for="message" id="message-label">Message</label>
                                <textarea 
                                    id="message" 
                                    name="message" 
                                    rows="5" 
                                    class="form-input"
                                    aria-required="true"
                                    required
                                ></textarea>
                                <div class="error-message" id="message-error" role="alert"></div>
                            </div>
                            
                            <input type="checkbox" name="botcheck" id="botcheck" class="hidden" style="display: none;">
                            <input type="hidden" name="timestamp" id="form-timestamp" value="">
                            <input type="hidden" name="math_answer" id="math-answer-hidden" value="0">
                            
                            <div class="input-group checkbox-group full-width">
                                <label class="checkbox-label" for="consent" id="consent-label">
                                    <input 
                                        type="checkbox" 
                                        id="consent"
                                        name="consent" 
                                        value="yes"
                                        aria-required="true"
                                        required
                                    >
                                    <span>I consent to Akeva Technologies collecting and storing my data for the purpose of responding to my inquiry.</span>
                                </label>
                                <div class="error-message consent-error" id="consent-error" role="alert"></div>
                            </div>
                            
                            <!-- Honeypot field to prevent spam -->
                            
                            
                            <div class="form-footer">
                                <button type="submit" class="btn" id="submit-button" aria-label="Send message about cybersecurity or AI governance services">
                                    Send Message
                                </button>
                                
                                <div class="form-message" id="form-message" role="status" aria-live="polite"></div>
                            </div>
                        </form>
                    </div>
                </div>
            </section>

            <section class="map-section" aria-labelledby="map-heading">
                <div class="container">
                    <h2 class="section-title" id="map-heading">Visit Our <span class="highlight">Office</span></h2>
                    <div class="map-container">
                        <!-- Google Maps iframe with improved accessibility -->
                        <iframe 
                            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2800.2839757750074!2d-75.65650462346277!3d45.43376573621425!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x4cce0517e1e94e7d%3A0x4b5b7d43fd6bb0d0!2s435%20St%20Laurent%20Blvd%20%23202%2C%20Ottawa%2C%20ON%20K1K%202Z8%2C%20Canada!5e0!3m2!1sen!2sus!4v1715090400000!5m2!1sen!2sus" 
                            width="100%" 
                            height="400" 
                            style="border:0; border-radius: 8px;" 
                            allowfullscreen="" 
                            loading="lazy" 
                            referrerpolicy="no-referrer-when-downgrade"
                            title="Google Maps showing Akeva Technologies office location"
                            aria-label="Map showing our office location at 435 St. Laurent Blvd Suite 202, Ottawa, ON"
                        ></iframe>
                    </div>
                </div>
            </section>
        </main>

        <footer role="contentinfo">
            <div class="container">
                <div class="footer-content">
                    <div class="footer-section">
                        <h3>Akeva Technologies</h3>
                        <p>Empowering organizations with comprehensive cybersecurity and AI governance solutions.</p>
                        <div class="social-icons">
                            <a href="#" aria-label="Visit our LinkedIn page"><i class="fab fa-linkedin" aria-hidden="true"></i></a>
                            <!-- To add LinkedIn URL, replace the # with the URL of your LinkedIn page-->
                            <!-- Example: -->
                            <!-- a href="https://www.linkedin.com/in/misse-misse/" -->
                        </div>
                    </div>
                    <div class="footer-section">
                        <h3>Quick Links</h3>
                        <ul class="contact-list">
                            <li><a href="index.html"><i class="fas fa-home" aria-hidden="true"></i> Home</a></li>
                            <li><a href="about.html"><i class="fas fa-info-circle" aria-hidden="true"></i> About</a></li>
                            <li><a href="services.html"><i class="fas fa-cogs" aria-hidden="true"></i> Services</a></li>
                            <li><a href="contact.html"><i class="fas fa-envelope" aria-hidden="true"></i> Contact</a></li>
                        </ul>
                    </div>
                    <div class="footer-section">
                        <h3>Contact</h3>
                        <address>
                            <ul class="contact-list">
                                <li>
                                    <a href="mailto:contact@akeva-technologies.com" aria-label="Email us">
                                        <i class="fas fa-envelope" aria-hidden="true"></i> contact@akeva-technologies.com
                                    </a>
                                </li>
                                <li>
                                    <a href="tel:+14164195683" aria-label="Call us">
                                        <i class="fas fa-phone" aria-hidden="true"></i> +1 (416) 419-5683
                                    </a>
                                </li>
                                <li>
                                    <a href="https://maps.app.goo.gl/W1SHXMqjcSrjs74H8" target="_blank" aria-label="View our location on Google Maps">
                                        <i class="fas fa-map-marker-alt" aria-hidden="true"></i> 435 St. Laurent Blvd Suite 202, OTTAWA, ON K1K2Z8
                                    </a>
                                </li>
                            </ul>
                        </address>
                    </div>
                </div>
                <div class="footer-bottom">
                    <p>&copy; <span id="currentYear"></span> Akeva Technologies. All rights reserved.</p>
                </div>
            </div>
        </footer>
    </div>

    <script>
        // Update current year in footer
        document.getElementById('currentYear').textContent = new Date().getFullYear();
        
        // Mobile menu toggle
        function toggleMobileMenu() {
            const nav = document.getElementById('primary-navigation');
            const menuIcon = document.getElementById('menu-icon');
            const menuButton = document.querySelector('.mobile-menu-toggle');
            
            nav.classList.toggle('active');
            document.body.classList.toggle('menu-open');
            
            const isOpen = nav.classList.contains('active');
            menuButton.setAttribute('aria-expanded', isOpen ? 'true' : 'false');
            
            if (isOpen) {
                menuIcon.classList.remove('fa-bars');
                menuIcon.classList.add('fa-times');
            } else {
                menuIcon.classList.remove('fa-times');
                menuIcon.classList.add('fa-bars');
            }
        }
        
        // Close mobile menu when clicking on a link
        document.querySelectorAll('#primary-navigation a').forEach(link => {
            link.addEventListener('click', function() {
                const nav = document.getElementById('primary-navigation');
                if (nav.classList.contains('active')) {
                    toggleMobileMenu();
                }
            });
        });
        
        // Add scroll event listener for header styling
        window.addEventListener('scroll', function() {
            const header = document.querySelector('header');
            if (window.scrollY > 50) {
                header.classList.add('scrolled');
            } else {
                header.classList.remove('scrolled');
            }
        });
        
        // Updated form handling code
        document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('contact-form');
    
    // Set timestamp when page loads
    document.getElementById('form-timestamp').value = Date.now();
    
    // Add a simple math challenge for humans
    const mathChallengeContainer = document.createElement('div');
    mathChallengeContainer.className = 'input-group full-width';
    mathChallengeContainer.innerHTML = `
        <label for="math-display" id="math-challenge-label">Please solve this simple math problem:</label>
        <div class="math-challenge-container">
            <span id="math-challenge"></span>
            <div class="number-control">
                <button type="button" class="number-btn" id="decrease-btn" aria-label="Decrease value">
                    <i class="fas fa-minus" aria-hidden="true"></i>
                </button>
                <span id="math-display" class="number-display" aria-live="polite" tabindex="0">0</span>
                <button type="button" class="number-btn" id="increase-btn" aria-label="Increase value">
                    <i class="fas fa-plus" aria-hidden="true"></i>
                </button>
            </div>
        </div>
        <div class="error-message" id="math-error" role="alert"></div>
    `;
    
    // Insert the math challenge before the consent checkbox
    const consentGroup = document.querySelector('.checkbox-group');
    form.insertBefore(mathChallengeContainer, consentGroup);
    
    // Generate random math problem
    function generateMathProblem() {
        const num1 = Math.floor(Math.random() * 10) + 1;
        const num2 = Math.floor(Math.random() * 10) + 1;
        const mathChallenge = document.getElementById('math-challenge');
        mathChallenge.textContent = `${num1} + ${num2} = `;
        // Store expected answer in a data attribute
        mathChallenge.dataset.answer = (num1 + num2).toString();
        // Reset the display to 0
        document.getElementById('math-display').textContent = '0';
        document.getElementById('math-answer-hidden').value = '0';
    }
    
    // Generate initial math problem
    generateMathProblem();
    
    // Add event listeners for the increase/decrease buttons
    document.getElementById('increase-btn').addEventListener('click', function() {
        const display = document.getElementById('math-display');
        const hiddenInput = document.getElementById('math-answer-hidden');
        let value = parseInt(display.textContent);
        if (value < 30) { // Set a reasonable upper limit
            value++;
            display.textContent = value;
            hiddenInput.value = value;
        }
    });
    
    document.getElementById('decrease-btn').addEventListener('click', function() {
        const display = document.getElementById('math-display');
        const hiddenInput = document.getElementById('math-answer-hidden');
        let value = parseInt(display.textContent);
        if (value > 0) { // Don't allow negative numbers
            value--;
            display.textContent = value;
            hiddenInput.value = value;
        }
    });
    
    // Allow keyboard navigation for accessibility
    document.getElementById('math-display').addEventListener('keydown', function(e) {
        if (e.key === 'ArrowUp' || e.key === '+') {
            document.getElementById('increase-btn').click();
            e.preventDefault();
        } else if (e.key === 'ArrowDown' || e.key === '-') {
            document.getElementById('decrease-btn').click();
            e.preventDefault();
        }
    });
    
    // Form validation
    form.addEventListener('submit', function(e) {
        let valid = true;
        
        // Clear previous error messages
        document.querySelectorAll('.error-message').forEach(el => {
            el.textContent = '';
        });
        document.querySelectorAll('.form-input').forEach(el => {
            el.classList.remove('error-input');
        });
        
        // Validate name
        const nameInput = document.getElementById('name');
        if (!nameInput.value.trim()) {
            document.getElementById('name-error').textContent = 'Name is required.';
            nameInput.classList.add('error-input');
            valid = false;
        }
        
        // Validate email
        const emailInput = document.getElementById('email');
        if (!emailInput.value.trim()) {
            document.getElementById('email-error').textContent = 'Email is required.';
            emailInput.classList.add('error-input');
            valid = false;
        } else if (!/\S+@\S+\.\S+/.test(emailInput.value)) {
            document.getElementById('email-error').textContent = 'Please enter a valid email address.';
            emailInput.classList.add('error-input');
            valid = false;
        }
        
        // Validate subject
        const subjectInput = document.getElementById('subject');
        if (!subjectInput.value.trim()) {
            document.getElementById('subject-error').textContent = 'Subject is required.';
            subjectInput.classList.add('error-input');
            valid = false;
        }
        
        // Validate message
        const messageInput = document.getElementById('message');
        if (!messageInput.value.trim()) {
            document.getElementById('message-error').textContent = 'Message is required.';
            messageInput.classList.add('error-input');
            valid = false;
        }
        
        // Validate math challenge
        const mathDisplay = document.getElementById('math-display');
        const expectedAnswer = document.getElementById('math-challenge').dataset.answer;
        if (mathDisplay.textContent !== expectedAnswer) {
            document.getElementById('math-error').textContent = 'Incorrect answer. Please try again.';
            document.getElementById('math-display').classList.add('error-input');
            valid = false;
            // Generate a new math problem
            generateMathProblem();
        }
        
        // Validate consent
        const consentInput = document.getElementById('consent');
        if (!consentInput.checked) {
            document.getElementById('consent-error').textContent = 'You must consent to proceed.';
            valid = false;
        }
        
        // Check if form was filled too quickly (likely a bot)
        const timestamp = parseInt(document.getElementById('form-timestamp').value);
        const currentTime = Date.now();
        const timeElapsed = (currentTime - timestamp) / 1000; // in seconds
        
        if (timeElapsed < 3) { // If form was filled in less than 3 seconds
            const formMessage = document.getElementById('form-message');
            formMessage.textContent = 'Form submitted too quickly. Please try again.';
            formMessage.className = 'form-message error';
            valid = false;
            // Reset timestamp
            document.getElementById('form-timestamp').value = Date.now();
        }
        
        if (!valid) {
            e.preventDefault();
            
            // Show form error message
            const formMessage = document.getElementById('form-message');
            if (!formMessage.textContent) {
                formMessage.textContent = 'Please fill out all required fields correctly.';
            }
            formMessage.className = 'form-message error';
            
            // Focus on the first error field
            const firstErrorField = document.querySelector('.error-input');
            if (firstErrorField) {
                firstErrorField.focus();
            }
            
            // Hide error message after 5 seconds
            setTimeout(() => {
                formMessage.textContent = '';
                formMessage.className = 'form-message';
            }, 5000);
            return;
        }
        
        // If valid, submit via AJAX to prevent page reload
        e.preventDefault();
        
        // Show loading state
        const submitButton = document.getElementById('submit-button');
        const formMessage = document.getElementById('form-message');
        submitButton.textContent = 'Sending...';
        submitButton.disabled = true;
        
        // Send form data via fetch API
        fetch(form.action, {
            method: 'POST',
            body: new FormData(form)
        })
        .then(response => {
            // Check if response is OK first
            if (response.ok) {
                // Success - don't even try to parse the response
                return {
                    status: 200,
                    data: {
                        success: true,
                        message: 'Thank you for your message! We will get back to you shortly.'
                    }
                };
            }
            
            // For error responses, try to parse JSON but have a fallback
            return response.json()
                .catch(() => {
                    return {
                        success: false,
                        message: 'There was an error processing your request.'
                    };
                })
                .then(data => {
                    return { status: response.status, data };
                });
        })
        .then(result => {
            const { status, data } = result;
            
            // Always show success message if we got here with status 200
            if (status === 200) {
                formMessage.textContent = 'Thank you for your message! We will get back to you shortly.';
                formMessage.className = 'form-message success';
                form.reset();
                // Generate new math problem after successful submission
                generateMathProblem();
                // Reset timestamp
                document.getElementById('form-timestamp').value = Date.now();
            } else if (status === 429) {
                // Rate limit exceeded
                formMessage.textContent = 'You have submitted too many messages recently. Please try again later.';
                formMessage.className = 'form-message error';
            } else {
                // Error message
                const errorMsg = data && data.message ? data.message : 'There was an error sending your message. Please try again.';
                formMessage.textContent = errorMsg;
                formMessage.className = 'form-message error';
            }
        })
        .catch(error => {
            // This will only happen for network errors
            console.error('Network Error:', error);
            formMessage.textContent = 'There was an error sending your message. Please try again.';
            formMessage.className = 'form-message error';
        })
        .finally(() => {
            // Reset button state
            submitButton.textContent = 'Send Message';
            submitButton.disabled = false;
        });
    });
    
    // Handle form success/error (for when redirect is not used)
    const urlParams = new URLSearchParams(window.location.search);
    const status = urlParams.get('status');
    
    if (status === 'success') {
        const formMessage = document.getElementById('form-message');
        formMessage.textContent = 'Thank you for your message! We will get back to you shortly.';
        formMessage.className = 'form-message success';
        
        // Reset form
        form.reset();
        // Generate new math problem
        generateMathProblem();
    } else if (status === 'error') {
        const formMessage = document.getElementById('form-message');
        formMessage.textContent = 'There was an error sending your message. Please try again.';
        formMessage.className = 'form-message error';
    }
});
    </script>
</body>
</html>
